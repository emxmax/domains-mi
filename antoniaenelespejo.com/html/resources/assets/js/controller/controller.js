// Generated by CoffeeScript 1.10.0
app.controller('bannerantoniaCrtl', [
  '$scope', '$location', '$timeout', function(scope, location, timeout) {
    scope.iniSlider = function() {
      new flickerplate({
        selector: '.flicker-example'
      });
    };
    scope.iniSlider();
    scope.carrusel = function() {
      if ($("#carosel1").lenght > 0) {
        $("#carosel1").owlCarousel({
          autoPlay: 3000,
          navigation: true,
          navigationText: '',
          items: 4,
          itemsDesktop: [1199, 4],
          itemsDesktopSmall: [979, 2]
        });
      }
    };
    timeout(scope.carrusel, 100);
  }
]);

app.controller('banner10Crtl', [
  '$scope', '$location', '$timeout', function(scope, location, timeout) {
    scope.carrusel = function() {
      $("#carosel10").owlCarousel({
        autoPlay: 3000,
        navigation: true,
        navigationText: '',
        items: 3,
        itemsDesktop: [1199, 3],
        itemsDesktopSmall: [750, 2]
      });
    };
    timeout(scope.carrusel, 100);
  }
]);

app.controller('popupCrtl', [
  '$scope', '$location', '$timeout', function(scope, location, timeout) {
    scope.cerrarPopup = function() {
      $(".inner-popup").fadeOut("slow");
      $("#page-popup").fadeOut("slow");
      $("body").removeClass("ocultarScroll");
    };
  }
]);

app.controller('bannerCrtl', [
  '$scope', '$location', '$timeout', function(scope, location, timeout) {
    scope.iniSlider = function() {
      new flickerplate({
        selector: '.flicker-example'
      });
    };
    scope.iniSlider();
    scope.hoverLink = function(e) {
      var a;
      a = $(e.target).parent().parent().next();
      console.log(a);
      a.fadeIn(500);
      a.css("display", "flex");
    };
    scope.quitarHover = function(e) {
      var a;
      a = $(".hoverDestacado");
      a.fadeOut(700);
    };
    scope.hoverBuscar = function(id) {
      var a;
      a = $("#b-" + id);
      console.log(a);
      a.fadeIn(500);
      a.css("display", "flex");
    };
    scope.quitarHoverBuscar = function() {
      var a;
      a = $(".hoverBuscar");
      a.fadeOut(700);
    };
    scope.carrusel = function() {
      $("#carosel1").owlCarousel({
        autoPlay: 3000,
        navigation: true,
        navigationText: '',
        items: 4,
        itemsDesktop: [1199, 4],
        itemsDesktopSmall: [979, 2]
      });
    };
    timeout(scope.carrusel, 100);
  }
]);

app.controller('banner2Crtl', [
  '$scope', '$location', '$timeout', function(scope, location, timeout) {
    scope.carrusel = function() {
      $("#carosel2").owlCarousel({
        autoPlay: 3000,
        navigation: true,
        navigationText: '',
        items: 5,
        itemsDesktop: [1199, 5],
        itemsDesktopSmall: [979, 2]
      });
    };
    timeout(scope.carrusel, 100);
  }
]);

app.controller('banner3Crtl', [
  '$scope', '$location', '$timeout', function(scope, location, timeout) {
    scope.carrusel = function() {
      $("#carosel3").owlCarousel({
        autoPlay: 3000,
        navigation: true,
        navigationText: '',
        items: 3,
        itemsDesktop: [1199, 3],
        itemsDesktopSmall: [979, 2]
      });
    };
    timeout(scope.carrusel, 100);
  }
]);

app.controller('detalleCrtl', [
  '$scope', '$location', '$timeout', function(scope, location, timeout) {
    scope.carrusel = function() {
      $("#carosel5").owlCarousel({
        autoPlay: 3000,
        navigation: true,
        navigationText: '',
        items: 2,
        itemsDesktop: [1199, 2],
        itemsDesktopSmall: [750, 2]
      });
    };
    return timeout(scope.carrusel, 100);
  }
]);

app.controller('detalleCrtl2', [
  '$scope', '$location', '$timeout', function(scope, location, timeout) {
    scope.carrusel = function() {
      $("#carosel6").owlCarousel({
        autoPlay: 3000,
        navigation: true,
        navigationText: '',
        items: 3,
        itemsDesktop: [1199, 3],
        itemsDesktopSmall: [750, 3]
      });
    };
    timeout(scope.carrusel, 100);
    (function(d, s, id) {
      var fjs, js;
      js = void 0;
      fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {
        return;
      }
      js = d.createElement(s);
      js.id = id;
      js.src = '//connect.facebook.net/es_LA/sdk.js#xfbml=1&version=v2.8';
      fjs.parentNode.insertBefore(js, fjs);
    })(document, 'script', 'facebook-jssdk');
  }
]);

app.controller('MenuMovilCrtl', [
  '$scope', '$http', '$timeout', '$location', function(scope, http, timeout, location2) {
    scope.txtbuscar = "";
    scope.setup = function() {
      var h, w;
      h = $(window).height();
      w = $(window).width();
      $("#navMovil").css("height", h);
    };
    scope.mostrarBuscador = function(e) {
      $(".inner-buscar").toggle("slow");
    };
    scope.verMenu = function(e) {
      $("#navMovil").toggle("slow");
    };
    scope.buscarAnto = function(e){
        console.log('Enter key pressed');
        console.log(scope.txtbuscar);
        top.location.href = "http://"+location2.host()+"/buscar.php?e="+scope.txtbuscar;
    };
    scope.setup();
  }
]);

app.controller('MenuCrtl', [
  '$scope', '$http', '$timeout', '$location', function(scope, http, timeout, location2) {
    scope.txtbuscar = "";
    scope.mostrarBuscador = function() {
      $(".inner-buscar").toggle("slow");
    };
    scope.buscarAnto = function(e){
        console.log('Enter key pressed');
        console.log(scope.txtbuscar);
        top.location.href = "http://"+location2.host()+"/buscar.php?e="+scope.txtbuscar;
    };
  }
]);

app.controller('subscribirseInternoCrtl', [
  '$scope', '$http', '$timeout', '$location', function(scope, http, timeout, location) {
    scope.form = [];
    scope.form = {};
    scope.setup = function() {
      scope.validacion();
    };
    scope.validacion = function() {
      $("#formSusc2").validate({
        rules: {
          nombre: "required",
          correo: {
            required: true,
            email: true
          }
        },
        messages: {
          nombre: "* Falta nombre",
          correo: "* Falta correo"
        }
      });
    };
    scope.muestraMsje = function(cod) {
      var msj;
      $("#formSusc2 .msje").fadeIn("slow");
      if (cod === 1) {
        msj = "Se envió su mensaje";
        if ($("#formSusc2 .alert").hasClass("alert-danger")) {
          $("#formSusc2 .alert").removeClass("alert-danger");
        }
        $("#formSusc2 .alert").addClass("alert-success");
      }
      if (cod === 0) {
        msj = "No se envió su mensaje";
        if ($("#formSusc2 .alert").hasClass("alert-success")) {
          $("#formSusc2 .alert").removeClass("alert-success");
        }
        $("#formSusc2 .alert").addClass("alert-danger");
      }
      $("#formSusc2 .alert h3").html(msj);
      $("#formSusc2 .alert").fadeIn("slow");
    };
    scope.cerrarmsjError = function() {
      console.log("cerrado");
      $("#formSusc2 label.error").remove();
    };
    scope.cerrarmsj = function() {
      $("#formSusc2 .msje").fadeOut("slow");
    };
    scope.enviarDatos = function(data) {
      console.log(data);
      if ($("#formSusc2").valid()) {
        scope.muestraMsje(1);
        document.getElementById('correo').blur();
        $("#formSusc2")[0].reset();
        timeout(scope.cerrarmsjError, 200);
      } else {
        scope.muestraMsje(0);
      }
      timeout(scope.cerrarmsj, 4000);
    };
    timeout(scope.setup, 200);
  }
]);

app.controller('subscribirseCrtl', [
  '$scope', '$http', '$timeout', '$location', function(scope, http, timeout, location) {
    scope.form = [];
    scope.form = {};
    scope.setup = function() {
      scope.validacion();
    };
    scope.validacion = function() {
      $("#formSusc").validate({
        rules: {
          nombre: "required",
          correo: {
            required: true,
            email: true
          }
        },
        messages: {
          nombre: "* Falta nombre",
          correo: "* Falta correo"
        }
      });
    };
    scope.muestraMsje = function() {
      $("#msj").fadeIn("slow");
    };
    scope.enviarDatos = function(dato) {
      if ($("#formSusc").valid()){
        var url = './controller/suscribete/enviar.php';
        data = {
          dato : dato
        };
        result = http.post(url,data);
        result.then(function(response){
          console.log(response);
          scope.muestraMsje();
        });
      };
    };
    timeout(scope.setup, 200);
  }
]);
