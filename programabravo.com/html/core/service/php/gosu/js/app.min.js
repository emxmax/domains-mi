/*!Sun May 04 2014 11:26:28 */
function Service(a){function b(a,b,c){console.log("error texto",a.responseText),console.log("error",a,b,c)}function c(){h.fadeIn("slow"),h.height($(document).height())}function d(){h.fadeOut("slow")}var e=a,f="GET",g=!1,h=$("#pantallaBloqueo");this.procesar=function(){var a,h,i=new Object;for(i.f=arguments[0],i.a=new Array,i.llave=this.llave,h=1;h<arguments.length-1;h++)a=arguments[h],i.a.push(a);var j=arguments[h],k={data:$.toJSON(i)},l=e;g&&c(),$.ajax({dataType:"json",data:k,type:f,url:l,success:function(a){j(a),g&&d()},error:b})},this.activarBloqueo=function(){g=!0},this.desactivarBloqueo=function(){g=!1}}function ControlArchivos(){function a(){$.ajax("listaArchivos.php").done(function(a){var c=JSON.parse(a);b(c)}).fail(function(a){mostrarError("archivos",a)}).always(function(){})}function b(a){f.fadeIn("slow");var b,e,g,h,i,j=a.arrayDirectorios,k=a.arrayArchivos,l=$("<ul>");for(f.html(""),f.append(l),b=0;b<j.length;b++)e=j[b],h=$("<li>"),e.dibujo=!1,e.visible=!1,h.data("dato",e),g=$("<label>"),g.html('<span class="glyphicon glyphicon-chevron-right"></span> '+e.nombre),h.append(g),l.append(h),g.on("click",c);for(b=0;b<k.length;b++)i=k[b],h=$("<li>"),espacioArchivo=$("<span>"),espacioArchivo.html(i.nombre),h.append(espacioArchivo),h.data("dato",i),l.append(h),h.on("click",d)}function c(){var a,b,e,f,g,h,e=$(this).parent(),i=e.data("dato"),j=i.arrayDirectorios,k=i.arrayArchivos;if(i.dibujo)h=$(e.find("ul")[0]);else{for(h=$("<ul>"),e.append(h),a=0;a<j.length;a++)b=j[a],e=$("<li>"),b.dibujo=!1,e.data("dato",b),f=$("<label>"),f.html('<span class="glyphicon glyphicon-chevron-right"></span> '+b.nombre),e.append(f),h.append(e),f.on("click",c);for(a=0;a<k.length;a++)g=k[a],e=$("<li>"),espacioArchivo=$("<span>"),espacioArchivo.html(g.nombre),e.append(espacioArchivo),e.data("dato",g),h.append(e),e.on("click",d)}i.visible=!i.visible,i.visible?h.show():h.hide(),i.dibujo=!0}function d(){if(e!=this){e=this,f.find("li").removeClass("bg-primary");var a=$(this);a.addClass("bg-primary");var b=a.data("dato");$(document).trigger("eligioArchivo",b)}}var e,f=$("#contendorArchivos");$("#btnRecargarArchivos").on("click",function(){f.fadeOut("slow",function(){a()})}),a(),this.acomodar=function(){{var a=controlApp.altoWindow;controlApp.anchoWindow}f.height(a-105),$("#seccionArchivos").height(a-40)}}function ControlFunciones(){function a(a,c){o=c,f.html("Service: "+c.nombre),l=c.link,m=c.nombre.replace(".php",""),b(l,m),h.html("")}function b(a,b){i.html(""),j.html("");{var d=g+a+"&nombre="+b;$.ajax(d).done(function(a){try{var b=JSON.parse(a);c(b)}catch(d){j.html(a)}}).fail(function(a){mostrarError("archivos",a)}).always(function(){})}}function c(a){var b,c,e;for(b=0;b<a.length;b++)e=a[b],c=$("<div class='col-xs-12 col-sm-6 col-md-3 pregunta'>"),c.html(e.nombre),h.append(c),c.data("dato",e),c.on("click",d)}function d(){p=!0,j.html("");var a=$(this);a.parent().find(".pregunta").removeClass("bg-primary"),a.addClass("bg-primary");var b=a.data("dato");n=b.nombre,i.html("Medoto: "+b.nombre);var c,d;for(c=0;c<b.parametros.length;c++)d=b.parametros[c],fila=$("<tr>"),celda=$("<td>"),celda.html(d),fila.append(celda),celda=$("<td>"),textoIngreso=$("<input class='form-control' placeholder='Ingresa valor'>"),celda.append(textoIngreso),fila.append(celda),j.append(fila)}function e(){if(p){var a=[];j.find("input").each(function(b,c){var d=$(c).val();try{valorJSON=JSON.parse(d)}catch(e){valorJSON=d}a.push(valorJSON)}),a=$.toJSON(a);var b="?link="+l+"&nombre="+m+"&funcion="+n+"&parametros="+a,c=q+b,d=new Date;$(document).trigger("consultando");{$.ajax(c).done(function(a){var c,e=new Date,f=e.getTime()-d.getTime();try{c=JSON.parse(a)}catch(g){c=a}fechaParseo=new Date;var h=fechaParseo.getTime()-e.getTime(),i=fechaParseo.getTime()-d.getTime(),j=8*a.length,k=8*b.length,l={};l.tiempoConsulta=f,l.tiempoParseo=h,l.tiempoTotal=i,l.datosRecibidos=j,l.datosEnviados=k;var m={};m.resultado=a,m.json=c,m.informacion=l,$(document).trigger("consultaTerminada",m)}).fail(function(a){mostrarError("archivos",a)}).always(function(){})}}}$(document).on("eligioArchivo",a);var f=$("#lblNombreArchivo"),g="estructuraArchivo.php?link=",h=$("#contenedorFunciones"),i=$("#lblNombreMetoto"),j=$("#listaParametros"),k=$("#btnConsultar");k.on("click",e);var l,m,n,o,p=!1,q="ejecutarMetodo.php";$("#btnRecargarFunciones").on("click",function(){o&&a(null,o)}),this.acomodar=function(){{var a=controlApp.altoWindow;controlApp.anchoWindow}$("#panelFunciones").height(a-41),$("#cuerpoFunciones").height(a-111)}}function ControlResultados(){function a(a,b){var g=b.resultado,h=b.json,i=b.informacion;$('#resultadosApp a[href="#resultado"]').tab("show"),d.mostrarResultado(h),c.mostrarResultado(i),e.mostrarResultado(h),f.mostrarResultado(g)}function b(){}$(document).on("consultando",b),$(document).on("consultaTerminada",a);var c=new VistaInformacion,d=new VistaResultado,e=new VistaTabulada,f=new VistaJSON;this.acomodar=function(){{var a=controlApp.altoWindow;controlApp.anchoWindow}$("#resultadosApp").height(a-40),$("#textoJSON").height(a-120),$("#resultadosApp .tab-pane").height(a-90)}}function ControlApp(){function a(){new VistaFormulario}function b(){e||$("#preloader").fadeOut("slow",function(){$("#app").fadeIn("slow")}),e=!0;var a=$(window);c.altoWindow=a.height(),c.anchoWindow=a.width(),c.ctArchivos.acomodar(),c.ctFunciones.acomodar(),c.ctResultados.acomodar()}this.ctArchivos=new ControlArchivos,this.ctFunciones=new ControlFunciones,this.ctResultados=new ControlResultados,this.altoWindow=0,this.anchoWindow=0;var c=this;$(window).on("resize",b);var d=$("#btnEnviarMensaje");d.on("click",a);var e=!1;setTimeout(b,200)}function mostrarError(a,b){alert("mesanje",b)}function getTipoVariable(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function BloquearPantalla(a,b){var c=$("<div>");c.addClass("modal fade");var d=$("<div>");d.addClass("modal-dialog");var e=$("<div>");e.addClass("modal-content");var f=$("<div>");f.addClass("modal-header");var g=$("<h4>");g.addClass("modal-title"),g.css({"text-align":"center"}),g.html(a);var h=$("<div>");h.addClass("modal-body"),h.css({"text-align":"center"}),h.html(b);var i=$("<div>");i.addClass("modal-footer");var j=$('<button data-dismiss="modal">');j.attr({type:"button"}),j.addClass("btn btn-primary"),j.html("Aceptar"),c.append(d),d.append(e),e.append(f),e.append(h),e.append(i),f.append(g),c.modal({keyboard:!1,backdrop:!1}),this.remover=function(){c.modal("hide"),setTimeout(function(){c.remove()},1e3)},this.setMensaje=function(a){h.html(a)}}function PopUpApp(a,b,c){var d=$("<div>");d.addClass("modal fade");var e=$("<div>");e.addClass("modal-dialog");var f=$("<div>");f.addClass("modal-content");var g=$("<div>");g.addClass("modal-header");var h=$('<button data-dismiss="modal" aria-hidden="true">');h.attr({type:"button"}),h.addClass("close"),h.html("&times;");var i=$("<h4>");i.addClass("modal-title"),i.html(a);var j=$("<div>");j.addClass("modal-body"),j.html(b);var k=$("<div>");k.addClass("modal-footer");var l=$('<button data-dismiss="modal">');l.attr({type:"button"}),l.addClass("btn btn-default"),l.html("Cancelar");var m=$('<button data-dismiss="modal">');m.attr({type:"button"}),m.addClass("btn btn-primary"),m.html("Aceptar"),d.append(e),e.append(f),f.append(g),f.append(j),f.append(k),g.append(h),g.append(i),k.append(l),k.append(m),d.modal("toggle"),m.on("click",c),this.setTextoSuccess=function(a){m.html(a)}}function VistaInformacion(){var a=$("#lblTiempoTotal"),b=$("#lblTiempoConsulta"),c=$("#lblTiempoDecodificacion"),d=$("#lblDatosEnviados"),e=$("#lblDatosRecibidos");this.mostrarResultado=function(f){var g=f.datosRecibidos,h=f.datosEnviados;g>1e4?g=Math.round(g/1024)+" KB":g+=" bytes",h>1e4?h=Math.round(h/1024)+" KB":h+=" bytes",a.html(f.tiempoTotal+"ms"),b.html(f.tiempoConsulta+"ms"),c.html(f.tiempoParseo+"ms"),d.html(h),e.html(g)}}function VistaFormulario(){function a(){var a=e.val(),b=f.val(),c={correo:a,mensaje:b};textoMensaje=$.toJSON(c);$.ajax("http://gosucoders.com/git/gosu/reportesApp.php?correo="+a+"&mensaje="+b).done(function(a){console.log("se envio mensaje",a),alert("Â¡Su mensaje fue enviado!")}).fail(function(){mostrarError("formulario","Hubo un error al enviar el mensaje")}).always(function(){})}var b=$("<div role='form'>"),c=$("<div class='form-group'>"),d=$("<label>");d.html("Correo");var e=$("<input type = 'email' class='form-control' placeholder='Correo'>");c.append(d),c.append(e),b.append(c),c=$("<div class='form-group'>"),d=$("<label>"),d.html("Mensaje");var f=$("<textarea class='form-control' placeholder='Mensaje'>");c.append(d),c.append(f),b.append(c);var g=new PopUpApp("Enviar un mensaje",b,function(){a()});g.setTextoSuccess("Enviar")}function VistaResultado(){function a(a){var b=$("<ul>"),c=$("<label class='llave arreglo'>");c.html("["),b.append(c);var d,e,f,g=$("<ul>");for(d=0;d<a.length;d++)e=a[d],f=h(e),g.append(f);return b.append(g),c=$("<label class='arreglo'>"),c.html("]"),b.append(c),b}function b(a){var b=$("<ul>"),c=$("<label class='llave objecto'>");c.html("{"),b.append(c);var d,e=$("<ul>");for(propiedad in a)d=$("<li>"),d.html(propiedad+":"),valor=h(a[propiedad]),d.append(valor),e.append(d);return b.append(e),c=$("<label class='objecto'>"),c.html("}"),b.append(c),b}function c(a){return a}function d(a){return a}function e(a){return'"'+a+'"'}function f(a){return a?1:0}function g(){return"null"}function h(h){var i,j=getTipoVariable(h);return i="array"==j?a(h):"object"==j?b(h):"number"==j?d(h):"string"==j?e(h):"boolean"==j?f(h):"null"==j?g():c(h)}$("#resultado");this.mostrarResultado=function(a){var b=$("#graficoResultado");b.html("");var c=h(a);b.append(c),b.find(".llave").on("click",function(){console.log("sdsd",this);var a=$(this),b=a.data("invisile"),c=$(a.parent().find("ul")[0]);b?(c.show(),b=!1):(c.hide(),b=!0),a.data("invisile",b)})}}function VistaJSON(){this.mostrarResultado=function(a){$("#textoJSON").val(a)}}function VistaTabulada(){var a=$("#tabuladoCabecera"),b=$("#tabuladoCuerpo");this.mostrarResultado=function(c){a.html(""),b.html("");tipoVariable=getTipoVariable(c);var d=c;if("array"==tipoVariable)d=c;else if("object"==tipoVariable)d=[],d.push(c);else if("number"==tipoVariable||"string"==tipoVariable||"bolean"==tipoVariable){var e={resultado:c};d=[],d.push(e)}else{var e={resultado:c};d=[],d.push(e)}var f,g,h;g=d[0];var i,k,l=$("<tr>"),m=[];for(h in g)celda=$("<th>"),celda.html(h),l.append(celda),m.push(h);for(a.append(l),f=0;f<d.length;f++)for(g=d[f],l=$("<tr>"),b.append(l),j=0;j<m.length;j++)h=m[j],celda=$("<td>"),i=g[h],k=getTipoVariable(i),"object"==k?i="{object}":"array"==k&&(i="[array]"),celda.html(i),l.append(celda)}}function cargarScript(){link=array[cargadas],elemento=S.incluirJS(link),$(elemento).on("load",function(){cargadas++,cargadas==array.length?inisciarApp():cargarScript()}),$(elemento).on("faild",function(){})}function inisciarApp(){controlApp=new ControlApp}if(0==production){var array=["js/vendor/service.js","js/ct/controlArchivos.js","js/ct/controlFunciones.js","js/ct/controlResultados.js","js/ct/controlApp.js","js/ventanas/bloquearPantalla.js","js/ventanas/popUpApp.js","js/vistas/vistaInformacion.js","js/vistas/vistaFormulario.js","js/vistas/vistaResultado.js","js/vistas/vistaJSON.js","js/vistas/vistaTabulada.js"],link,i,elemento,cargadas=0;cargarScript()}else $(window).on("load",inisciarApp);var datosApp,controlApp;